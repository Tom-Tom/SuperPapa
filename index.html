<html>
<head>
	<title>Super Papa</title>
</head>
<body>
	<h1>MON PAPA A MOI EST AU FN !</h1>
	<img src="assets/img/superpapa.gif">

	<device type="media" onchange="update(this.data)"></device>

	<video id="sourcevid" autoplay controls>Put your fallback message here.</video>

	<script>
		function update(stream) {
			document.querySelector('video').src = stream.url;
		}
		window.addEventListener('DOMContentLoaded', function() {

		    var video = document.getElementById('sourcevid');

		    console.log(navigator);
		    window.URL = window.URL || window.webkitURL;
			navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;

		    if (navigator.getUserMedia) {
		        //navigator.webkitGetUserMedia('video', successCallback, errorCallback);
		        navigator.getUserMedia({audio: true, video: true}, successCallback, errorCallback);

		        function successCallback(stream) {
		            video.src = window.webkitURL.createObjectURL(stream);
		        }

		        function errorCallback(error) {
		            console.error('An error occurred: [CODE ' + error.code + ']');
		            return;
		        }

		    } else {
		        console.log('Native web camera streaming (getUserMedia) is not supported in this browser.');
		        return;
		    }
		}, false);
	</script>
</body>
</html>